(function(a){function b(){this.id=("app-"+(new Date()).getTime());this.locationMonitorInterval=null;this.locationMonitorDelay=150;this.locationFrame=null;this.currentLocation=null;this.routeMappings=[];this.controllers=[];this.models={cache:{},classes:{}};this.views={cache:{},classes:{}};this.locationEvent=null;a(this).bind("locationchange",this.proxyCallback(this.onLocationChange));this.isRunning=false}b.prototype.addClass=function(d,f){var c=f.constructor;if(c==Function){var e=f.toString().match(new RegExp("^function\\s+([^\\s\\(]+)","i"))[1];d.classes[e]=f}else{var e=f.constructor.toString().match(new RegExp("^function\\s+([^\\s\\(]+)","i"))[1];d.classes[e]=f.constructor;d.cache[e]=f;if(this.isRunning){this.initClass(f)}}};b.prototype.addController=function(c){this.controllers.push(c);if(this.isRunning){this.initClass(c)}};b.prototype.addModel=function(c){this.addClass(this.models,c)};b.prototype.addView=function(c){this.addClass(this.views,c)};b.prototype.ajax=function(f){var e=this;var d=a.extend({type:"get",dataType:"json",normalizeJSON:false,cache:false,timeout:(10*1000),success:function(g,h){},error:function(h,i,g){alert("There was a critical error communicating with the server")},complete:function(g,h){}},f);if(d.normalizeJSON&&(d.dataType=="json")&&f.success){var c=f.success;d.success=function(g,h){c(e.normalizeJSON(g))}}a.ajax(d)};b.prototype.checkLocationForChange=function(){var c=this.normalizeHash(window.location.hash);if((this.currentLocation==null)||(this.currentLocation!=c)){if(this.locationFrame){this.locationFrame.attr("src","ie_back_button.htm?_="+(new Date()).getTime()+"&hash="+c)}this.setLocation(c)}};b.prototype.getClass=function(d,e,f){if(d.cache[e]){return(d.cache[e])}else{var c=new (d.classes[e])();d.classes[e].apply(c,f);return(c)}};b.prototype.getFromTemplate=function(e,c){var d=e.html();d=d.replace(new RegExp("\\$\\{([^\\}]+)\\}","gi"),function(f,g){if(g in c){return(c[g])}else{return(f)}});return(a(d).data("model",c))};b.prototype.getModel=function(c,d){return(this.getClass(this.models,c,d))};b.prototype.getView=function(c,d){return(this.getClass(this.views,c,d))};b.prototype.initClass=function(c){if(c.init){c.init()}};b.prototype.initClasses=function(d){var c=this;a.each(d,function(f,e){c.initClass(e)})};b.prototype.initControllers=function(){this.initClasses(this.controllers)};b.prototype.initLocationMonitor=function(){if(document.all){this.locationFrame=a('<iframe src="about:black" style="display: none ;" />').appendTo(document.body)}};b.prototype.initModels=function(){this.initClasses(this.models.cache)};b.prototype.initViews=function(){this.initClasses(this.views.cache)};b.prototype.log=function(){if(window.console&&window.console.log){window.console.log.apply(window.console,arguments)}else{a.each(arguments,function(d,c){a(document.body).append("<p>"+c.toString()+"</p>")})}};b.prototype.normalizeHash=function(c){return(c.replace(new RegExp("^[#/]+|/$","g"),""))};b.prototype.normalizeJSON=function(c){var d=this;if((typeof(c)=="boolean")||(typeof(c)=="string")||(typeof(c)=="number")||a.isFunction(c)){return(c)}if(a.isArray(c)){var e=[];a.each(c,function(g,f){e[g]=d.normalizeJSON(f)})}else{var e={};a.each(c,function(g,f){e[g.toLowerCase()]=d.normalizeJSON(f)})}return(e)};b.prototype.onLocationChange=function(f){var e=this;var c=true;var d=false;this.stopLocationMonitor();a.each(this.routeMappings,function(h,i){var j=null;if(!c){return}var k={application:e,fromLocation:f.fromLocation,toLocation:f.toLocation,parameters:a.extend({},f.parameters)};if(j=f.toLocation.match(i.test)){j.shift();a.each(j,function(m,l){k.parameters[i.parameters[m]]=l});if(i.controller.preHandler){i.controller.preHandler(k)}var g=i.handler.apply(i.controller,[k].concat(j));if(i.controller.postHandler){i.controller.postHandler(k)}if((typeof(g)=="boolean")&&!g){c=false}d=true}});this.startLocationMonitor();if(!d){this.relocateTo("404")}};b.prototype.proxyCallback=function(d){var c=this;return(function(){return(d.apply(c,arguments))})};b.prototype.relocateTo=function(d,c){this.setLocation(d,c)};b.prototype.run=function(){this.initModels();this.initViews();this.initControllers();this.initLocationMonitor();this.startLocationMonitor();this.isRunning=true};b.prototype.setLocation=function(e,d){e=this.normalizeHash(e);var f=this.currentLocation;var c=e;this.currentLocation=e;window.location.hash=("#/"+e);a(this).trigger({type:"locationchange",fromLocation:f,toLocation:c,parameters:d})};b.prototype.startLocationMonitor=function(){var c=this;this.locationMonitorInterval=setInterval(function(){c.checkLocationForChange()},this.locationMonitorDelay)};b.prototype.stopLocationMonitor=function(){clearInterval(this.locationMonitorInterval)};b.prototype.Controller=function(){};b.prototype.Controller.prototype={route:function(f,c){f=application.normalizeHash(f);var d=[];var e=f.replace(new RegExp("(/):([^/]+)","gi"),function(g,i,h){d.push(h);return(i+"([^/]+)")});application.routeMappings.push({controller:this,parameters:d,test:new RegExp(("^"+e+"$"),"i"),handler:c})}};window.application=new b();a(function(){window.application.run()});return(window.application)})(jQuery);jQuery.cookie=function(d,g,e){if(typeof g!="undefined"){e=e||{};if(g===null){g="";e.expires=-1}var f="";if(e.expires&&(typeof e.expires=="number"||e.expires.toUTCString)){var k;if(typeof e.expires=="number"){k=new Date();k.setTime(k.getTime()+(e.expires*24*60*60*1000))}else{k=e.expires}f="; expires="+k.toUTCString()}var b=e.path?"; path="+e.path:"";var l=e.domain?"; domain="+e.domain:"";var h=e.secure?"; secure":"";document.cookie=[d,"=",encodeURIComponent(g),f,b,l,h].join("")}else{var a=null;if(document.cookie&&document.cookie!=""){var j=document.cookie.split(";");for(var m=0;m<j.length;m++){var c=jQuery.trim(j[m]);if(c.substring(0,d.length+1)==(d+"=")){a=decodeURIComponent(c.substring(d.length+1));break}}}return a}};(function(a){a.extend(a.fn,{swapClass:function(c,e){var d=this.filter("."+c);this.filter("."+e).removeClass(e).addClass(c);d.removeClass(c).addClass(e);return this},replaceClass:function(d,c){return this.filter("."+d).removeClass(d).addClass(c).end()},hoverClass:function(c){c=c||"hover";return this.hover(function(){a(this).addClass(c)},function(){a(this).removeClass(c)})},heightToggle:function(d,c){d?this.animate({height:"toggle"},d,c):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"]();if(c){c.apply(this,arguments)}})},heightHide:function(d,c){if(d){this.animate({height:"hide"},d,c)}else{this.hide();if(c){this.each(c)}}},prepareBranches:function(c){if(!c.prerendered){this.filter(":last-child:not(ul)").addClass(b.last);this.filter((c.collapsed?"":"."+b.closed)+":not(."+b.open+")").find(">ul").hide()}return this.filter(":has(>ul)")},applyClasses:function(d,c){this.filter(":has(>ul):not(:has(>a))").find(">span").click(function(e){c.apply(a(this).next())}).add(a("a",this)).hoverClass();if(!d.prerendered){this.filter(":has(>ul:hidden)").addClass(b.expandable).replaceClass(b.last,b.lastExpandable);this.not(":has(>ul:hidden)").addClass(b.collapsable).replaceClass(b.last,b.lastCollapsable);this.prepend('<div class="'+b.hitarea+'"/>').find("div."+b.hitarea).each(function(){var e="";a.each(a(this).parent().attr("class").split(" "),function(){e+=this+"-hitarea "});a(this).addClass(e)})}this.find("div."+b.hitarea).click(c)},treeview:function(g){g=a.extend({cookieId:"treeview"},g);if(g.add){return this.trigger("add",[g.add])}if(g.toggle){var j=g.toggle;g.toggle=function(){return j.apply(a(this).parent()[0],arguments)}}function e(n,m){function l(o){return function(){d.apply(a("div."+b.hitarea,n).filter(function(){return o?a(this).parent("."+o).length:true}));return false}}a("a:eq(0)",m).click(l(b.collapsable));a("a:eq(1)",m).click(l(b.expandable));a("a:eq(2)",m).click(l())}function d(){a(this).parent().find(">.hitarea").swapClass(b.collapsableHitarea,b.expandableHitarea).swapClass(b.lastCollapsableHitarea,b.lastExpandableHitarea).end().swapClass(b.collapsable,b.expandable).swapClass(b.lastCollapsable,b.lastExpandable).find(">ul").heightToggle(g.animated,g.toggle);if(g.unique){a(this).parent().siblings().find(">.hitarea").replaceClass(b.collapsableHitarea,b.expandableHitarea).replaceClass(b.lastCollapsableHitarea,b.lastExpandableHitarea).end().replaceClass(b.collapsable,b.expandable).replaceClass(b.lastCollapsable,b.lastExpandable).find(">ul").heightHide(g.animated,g.toggle)}}function i(){function m(n){return n?1:0}var l=[];h.each(function(n,o){l[n]=a(o).is(":has(>ul:visible)")?1:0});a.cookie(g.cookieId,l.join(""))}function k(){var m=a.cookie(g.cookieId);if(m){var l=m.split("");h.each(function(n,o){a(o).find(">ul")[parseInt(l[n])?"show":"hide"]()})}}this.addClass("treeview hyperlinks");var h=this.find("li").prepareBranches(g);switch(g.persist){case"cookie":var f=g.toggle;g.toggle=function(){i();if(f){f.apply(this,arguments)}};k();break;case"location":var c=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(c.length){c.addClass("selected").parents("ul, li").add(c.next()).show()}break}h.applyClasses(g,d);if(g.control){e(this,g.control);a(g.control).show()}return this.bind("add",function(m,l){a(l).prev().removeClass(b.last).removeClass(b.lastCollapsable).removeClass(b.lastExpandable).find(">.hitarea").removeClass(b.lastCollapsableHitarea).removeClass(b.lastExpandableHitarea);a(l).find("li").andSelf().prepareBranches(g).applyClasses(g,d)})}});var b=a.fn.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"};a.fn.Treeview=a.fn.treeview})(jQuery);(function(a){function b(d,g,f,e){a.getJSON(d.url,{root:g},function(h){function i(k){var j=a("<li/>").attr("id",this.id||"").html("<span><img src='/content/images/album.png' style='vertical-align: bottom; margin-right: 4px;' /><a href=\"#/show/"+this.id+'" name="'+this.id+'" >'+this.text+"</a></span>").appendTo(k);if(this.classes){j.children("span").addClass(this.classes)}if(this.expanded){j.addClass("open")}if(this.hasChildren||this.children&&this.children.length){var l=a("<ul/>").appendTo(j);if(this.hasChildren){j.addClass("hasChildren");i.call({text:"placeholder",id:"placeholder",children:[]},l)}if(this.children&&this.children.length){a.each(this.children,i,[l])}}}a.each(h,i,[f]);a(e).treeview({add:f})})}var c=a.fn.treeview;a.fn.treeview=function(d){if(!d.url){return c.apply(this,arguments)}var f=this;b(d,"source",this,f);var e=d.toggle;return c.call(this,a.extend({},d,{collapsed:true,toggle:function(){var h=a(this);if(h.hasClass("hasChildren")){var g=h.removeClass("hasChildren").find("ul");g.empty();b(d,this.id,g,f)}if(e){e.apply(this,arguments)}}}))}})(jQuery);eval(function(g,f,b,i,h,d){h=function(a){return(a<f?"":h(parseInt(a/f)))+((a=a%f)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(b--){d[h(b)]=i[b]||h(b)}i=[function(a){return d[a]}];h=function(){return"\\w+"};b=1}while(b--){if(i[b]){g=g.replace(new RegExp("\\b"+h(b)+"\\b","g"),i[b])}}return g}("h.i['1a']=h.i['z'];h.O(h.i,{y:'D',z:9(x,t,b,c,d){6 h.i[h.i.y](x,t,b,c,d)},17:9(x,t,b,c,d){6 c*(t/=d)*t+b},D:9(x,t,b,c,d){6-c*(t/=d)*(t-2)+b},13:9(x,t,b,c,d){e((t/=d/2)<1)6 c/2*t*t+b;6-c/2*((--t)*(t-2)-1)+b},X:9(x,t,b,c,d){6 c*(t/=d)*t*t+b},U:9(x,t,b,c,d){6 c*((t=t/d-1)*t*t+1)+b},R:9(x,t,b,c,d){e((t/=d/2)<1)6 c/2*t*t*t+b;6 c/2*((t-=2)*t*t+2)+b},N:9(x,t,b,c,d){6 c*(t/=d)*t*t*t+b},M:9(x,t,b,c,d){6-c*((t=t/d-1)*t*t*t-1)+b},L:9(x,t,b,c,d){e((t/=d/2)<1)6 c/2*t*t*t*t+b;6-c/2*((t-=2)*t*t*t-2)+b},K:9(x,t,b,c,d){6 c*(t/=d)*t*t*t*t+b},J:9(x,t,b,c,d){6 c*((t=t/d-1)*t*t*t*t+1)+b},I:9(x,t,b,c,d){e((t/=d/2)<1)6 c/2*t*t*t*t*t+b;6 c/2*((t-=2)*t*t*t*t+2)+b},G:9(x,t,b,c,d){6-c*8.C(t/d*(8.g/2))+c+b},15:9(x,t,b,c,d){6 c*8.n(t/d*(8.g/2))+b},12:9(x,t,b,c,d){6-c/2*(8.C(8.g*t/d)-1)+b},Z:9(x,t,b,c,d){6(t==0)?b:c*8.j(2,10*(t/d-1))+b},Y:9(x,t,b,c,d){6(t==d)?b+c:c*(-8.j(2,-10*t/d)+1)+b},W:9(x,t,b,c,d){e(t==0)6 b;e(t==d)6 b+c;e((t/=d/2)<1)6 c/2*8.j(2,10*(t-1))+b;6 c/2*(-8.j(2,-10*--t)+2)+b},V:9(x,t,b,c,d){6-c*(8.o(1-(t/=d)*t)-1)+b},S:9(x,t,b,c,d){6 c*8.o(1-(t=t/d-1)*t)+b},Q:9(x,t,b,c,d){e((t/=d/2)<1)6-c/2*(8.o(1-t*t)-1)+b;6 c/2*(8.o(1-(t-=2)*t)+1)+b},P:9(x,t,b,c,d){f s=1.l;f p=0;f a=c;e(t==0)6 b;e((t/=d)==1)6 b+c;e(!p)p=d*.3;e(a<8.w(c)){a=c;f s=p/4}m f s=p/(2*8.g)*8.r(c/a);6-(a*8.j(2,10*(t-=1))*8.n((t*d-s)*(2*8.g)/p))+b},H:9(x,t,b,c,d){f s=1.l;f p=0;f a=c;e(t==0)6 b;e((t/=d)==1)6 b+c;e(!p)p=d*.3;e(a<8.w(c)){a=c;f s=p/4}m f s=p/(2*8.g)*8.r(c/a);6 a*8.j(2,-10*t)*8.n((t*d-s)*(2*8.g)/p)+c+b},T:9(x,t,b,c,d){f s=1.l;f p=0;f a=c;e(t==0)6 b;e((t/=d/2)==2)6 b+c;e(!p)p=d*(.3*1.5);e(a<8.w(c)){a=c;f s=p/4}m f s=p/(2*8.g)*8.r(c/a);e(t<1)6-.5*(a*8.j(2,10*(t-=1))*8.n((t*d-s)*(2*8.g)/p))+b;6 a*8.j(2,-10*(t-=1))*8.n((t*d-s)*(2*8.g)/p)*.5+c+b},F:9(x,t,b,c,d,s){e(s==u)s=1.l;6 c*(t/=d)*t*((s+1)*t-s)+b},E:9(x,t,b,c,d,s){e(s==u)s=1.l;6 c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},16:9(x,t,b,c,d,s){e(s==u)s=1.l;e((t/=d/2)<1)6 c/2*(t*t*(((s*=(1.B))+1)*t-s))+b;6 c/2*((t-=2)*t*(((s*=(1.B))+1)*t+s)+2)+b},A:9(x,t,b,c,d){6 c-h.i.v(x,d-t,0,c,d)+b},v:9(x,t,b,c,d){e((t/=d)<(1/2.k)){6 c*(7.q*t*t)+b}m e(t<(2/2.k)){6 c*(7.q*(t-=(1.5/2.k))*t+.k)+b}m e(t<(2.5/2.k)){6 c*(7.q*(t-=(2.14/2.k))*t+.11)+b}m{6 c*(7.q*(t-=(2.18/2.k))*t+.19)+b}},1b:9(x,t,b,c,d){e(t<d/2)6 h.i.A(x,t*2,0,c,d)*.5+b;6 h.i.v(x,t*2-d,0,c,d)*.5+c*.5+b}});",62,74,"||||||return||Math|function|||||if|var|PI|jQuery|easing|pow|75|70158|else|sin|sqrt||5625|asin|||undefined|easeOutBounce|abs||def|swing|easeInBounce|525|cos|easeOutQuad|easeOutBack|easeInBack|easeInSine|easeOutElastic|easeInOutQuint|easeOutQuint|easeInQuint|easeInOutQuart|easeOutQuart|easeInQuart|extend|easeInElastic|easeInOutCirc|easeInOutCubic|easeOutCirc|easeInOutElastic|easeOutCubic|easeInCirc|easeInOutExpo|easeInCubic|easeOutExpo|easeInExpo||9375|easeInOutSine|easeInOutQuad|25|easeOutSine|easeInOutBack|easeInQuad|625|984375|jswing|easeInOutBounce".split("|"),0,{}));/* Copyright (c) 2009 Brandon Aaron (http://brandonaaron.net)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 *
 * Version: 3.0.2
 * 
 * Requires: 1.2.2+
 */
(function(e){function a(c){var d=[].slice.call(arguments,1),b=0;c=e.event.fix(c||window.event);c.type="mousewheel";if(c.wheelDelta){b=c.wheelDelta/120}if(c.detail){b=-c.detail/3}d.unshift(c,b);return e.event.handle.apply(this,d)}var f=["DOMMouseScroll","mousewheel"];e.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var b=f.length;b;){this.addEventListener(f[--b],a,false)}}else{this.onmousewheel=a}},teardown:function(){if(this.removeEventListener){for(var b=f.length;b;){this.removeEventListener(f[--b],a,false)}}else{this.onmousewheel=null}}};e.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})})(jQuery);(function(x){var m,F,G,d,l,M,O,T,p,z=0,H={},Q=[],C=0,a={},S=[],u=null,N=new Image(),k=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,P=/[^\.]\.(swf)\s*$/i,n,A=1,e,L,g=false,U=20,y=x.extend(x("<div/>")[0],{prop:0}),K=0,f=!x.support.opacity&&!window.XMLHttpRequest,s=function(){F.hide();N.onerror=N.onload=null;if(u){u.abort()}m.empty()},B=function(){x.fancybox('<p id="fancybox_error">The requested content cannot be loaded.<br />Please try again later.</p>',{scrolling:"no",padding:20,transitionIn:"none",transitionOut:"none"})},h=function(){return[x(window).width(),x(window).height(),x(document).scrollLeft(),x(document).scrollTop()]},q=function(){var X=h(),V={},aa=a.margin,ac=a.autoScale,ab=(U+aa)*2,Z=(U+aa)*2,Y=(a.padding*2),W;if(a.width.toString().indexOf("%")>-1){V.width=((X[0]*parseFloat(a.width))/100)-(U*2);ac=false}else{V.width=a.width+Y}if(a.height.toString().indexOf("%")>-1){V.height=((X[1]*parseFloat(a.height))/100)-(U*2);ac=false}else{V.height=a.height+Y}if(ac&&(V.width>(X[0]-ab)||V.height>(X[1]-Z))){if(H.type=="image"||H.type=="swf"){ab+=Y;Z+=Y;W=Math.min(Math.min(X[0]-ab,a.width)/a.width,Math.min(X[1]-Z,a.height)/a.height);V.width=Math.round(W*(V.width-Y))+Y;V.height=Math.round(W*(V.height-Y))+Y}else{V.width=Math.min(V.width,(X[0]-ab));V.height=Math.min(V.height,(X[1]-Z))}}V.top=X[3]+((X[1]-(V.height+(U*2)))*0.5);V.left=X[2]+((X[0]-(V.width+(U*2)))*0.5);if(a.autoScale===false){V.top=Math.max(X[3]+aa,V.top);V.left=Math.max(X[2]+aa,V.left)}return V},j=function(V){if(V&&V.length){switch(a.titlePosition){case"inside":return V;case"over":return'<span id="fancybox-title-over">'+V+"</span>";default:return'<span id="fancybox-title-wrap"><span id="fancybox-title-left"></span><span id="fancybox-title-main">'+V+'</span><span id="fancybox-title-right"></span></span>'}}return false},r=function(){var V=a.title,W=L.width-(a.padding*2),X="fancybox-title-"+a.titlePosition;x("#fancybox-title").remove();K=0;if(a.titleShow===false){return}V=x.isFunction(a.titleFormat)?a.titleFormat(V,S,C,a):j(V);if(!V||V===""){return}x('<div id="fancybox-title" class="'+X+'" />').css({width:W,paddingLeft:a.padding,paddingRight:a.padding}).html(V).appendTo("body");switch(a.titlePosition){case"inside":K=x("#fancybox-title").outerHeight(true)-a.padding;L.height+=K;break;case"over":x("#fancybox-title").css("bottom",a.padding);break;default:x("#fancybox-title").css("bottom",x("#fancybox-title").outerHeight(true)*-1);break}x("#fancybox-title").appendTo(l).hide()},E=function(){x(document).unbind("keydown.fb").bind("keydown.fb",function(V){if(V.keyCode==27&&a.enableEscapeButton){V.preventDefault();x.fancybox.close()}else{if(V.keyCode==37){V.preventDefault();x.fancybox.prev()}else{if(V.keyCode==39){V.preventDefault();x.fancybox.next()}}}});if(x.fn.mousewheel){d.unbind("mousewheel.fb");if(S.length>1){d.bind("mousewheel.fb",function(V,W){V.preventDefault();if(g||W===0){return}if(W>0){x.fancybox.prev()}else{x.fancybox.next()}})}}if(!a.showNavArrows){return}if((a.cyclic&&S.length>1)||C!==0){T.show()}if((a.cyclic&&S.length>1)||C!=(S.length-1)){p.show()}},I=function(){var W,V;if((S.length-1)>C){W=S[C+1].href;if(typeof W!=="undefined"&&W.match(k)){V=new Image();V.src=W}}if(C>0){W=S[C-1].href;if(typeof W!=="undefined"&&W.match(k)){V=new Image();V.src=W}}},R=function(){M.css("overflow",(a.scrolling=="auto"?(a.type=="image"||a.type=="iframe"||a.type=="swf"?"hidden":"auto"):(a.scrolling=="yes"?"auto":"visible")));if(!x.support.opacity){M.get(0).style.removeAttribute("filter");d.get(0).style.removeAttribute("filter")}x("#fancybox-title").show();if(a.hideOnContentClick){M.one("click",x.fancybox.close)}if(a.hideOnOverlayClick){G.one("click",x.fancybox.close)}if(a.showCloseButton){O.show()}E();x(window).bind("resize.fb",x.fancybox.center);if(a.centerOnScroll){x(window).bind("scroll.fb",x.fancybox.center)}else{x(window).unbind("scroll.fb")}if(x.isFunction(a.onComplete)){a.onComplete(S,C,a)}g=false;I()},v=function(Z){var W=Math.round(e.width+(L.width-e.width)*Z),V=Math.round(e.height+(L.height-e.height)*Z),Y=Math.round(e.top+(L.top-e.top)*Z),X=Math.round(e.left+(L.left-e.left)*Z);d.css({width:W+"px",height:V+"px",top:Y+"px",left:X+"px"});W=Math.max(W-a.padding*2,0);V=Math.max(V-(a.padding*2+(K*Z)),0);M.css({width:W+"px",height:V+"px"});if(typeof L.opacity!=="undefined"){d.css("opacity",(Z<0.5?0.5:Z))}},D=function(W){var V=W.offset();V.top+=parseFloat(W.css("paddingTop"))||0;V.left+=parseFloat(W.css("paddingLeft"))||0;V.top+=parseFloat(W.css("border-top-width"))||0;V.left+=parseFloat(W.css("border-left-width"))||0;V.width=W.width();V.height=W.height();return V},o=function(){var V=H.orig?x(H.orig):false,Y={},W,X;if(V&&V.length){W=D(V);Y={width:(W.width+(a.padding*2)),height:(W.height+(a.padding*2)),top:(W.top-a.padding-U),left:(W.left-a.padding-U)}}else{X=h();Y={width:1,height:1,top:X[3]+X[1]*0.5,left:X[2]+X[0]*0.5}}return Y},J=function(){F.hide();if(d.is(":visible")&&x.isFunction(a.onCleanup)){if(a.onCleanup(S,C,a)===false){x.event.trigger("fancybox-cancel");g=false;return}}S=Q;C=z;a=H;M.get(0).scrollTop=0;M.get(0).scrollLeft=0;if(a.overlayShow){if(f){x("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"})}G.css({"background-color":a.overlayColor,opacity:a.overlayOpacity}).unbind().show()}L=q();r();if(d.is(":visible")){x(O.add(T).add(p)).hide();var W=d.position(),V;e={top:W.top,left:W.left,width:d.width(),height:d.height()};V=(e.width==L.width&&e.height==L.height);M.fadeOut(a.changeFade,function(){var X=function(){M.html(m.contents()).fadeIn(a.changeFade,R)};x.event.trigger("fancybox-change");M.empty().css("overflow","hidden");if(V){M.css({top:a.padding,left:a.padding,width:Math.max(L.width-(a.padding*2),1),height:Math.max(L.height-(a.padding*2)-K,1)});X()}else{M.css({top:a.padding,left:a.padding,width:Math.max(e.width-(a.padding*2),1),height:Math.max(e.height-(a.padding*2),1)});y.prop=0;x(y).animate({prop:1},{duration:a.changeSpeed,easing:a.easingChange,step:v,complete:X})}});return}d.css("opacity",1);if(a.transitionIn=="elastic"){e=o();M.css({top:a.padding,left:a.padding,width:Math.max(e.width-(a.padding*2),1),height:Math.max(e.height-(a.padding*2),1)}).html(m.contents());d.css(e).show();if(a.opacity){L.opacity=0}y.prop=0;x(y).animate({prop:1},{duration:a.speedIn,easing:a.easingIn,step:v,complete:R})}else{M.css({top:a.padding,left:a.padding,width:Math.max(L.width-(a.padding*2),1),height:Math.max(L.height-(a.padding*2)-K,1)}).html(m.contents());d.css(L).fadeIn(a.transitionIn=="none"?0:a.speedIn,R)}},w=function(){m.width(H.width);m.height(H.height);if(H.width=="auto"){H.width=m.width()}if(H.height=="auto"){H.height=m.height()}J()},t=function(){g=true;H.width=N.width;H.height=N.height;x("<img />").attr({id:"fancybox-img",src:N.src,alt:H.title}).appendTo(m);J()},b=function(){s();var ac=Q[z],V,ab,aa,W,X,Z,Y;H=x.extend({},x.fn.fancybox.defaults,(typeof x(ac).data("fancybox")=="undefined"?H:x(ac).data("fancybox")));aa=ac.title||x(ac).title||H.title||"";if(ac.nodeName&&!H.orig){H.orig=x(ac).children("img:first").length?x(ac).children("img:first"):x(ac)}if(aa===""&&H.orig){aa=H.orig.attr("alt")}if(ac.nodeName&&(/^(?:javascript|#)/i).test(ac.href)){V=H.href||null}else{V=H.href||ac.href||null}if(H.type){ab=H.type;if(!V){V=H.content}}else{if(H.content){ab="html"}else{if(V){if(V.match(k)){ab="image"}else{if(V.match(P)){ab="swf"}else{if(x(ac).hasClass("iframe")){ab="iframe"}else{if(V.match(/#/)){ac=V.substr(V.indexOf("#"));ab=x(ac).length>0?"inline":"ajax"}else{ab="ajax"}}}}}else{ab="inline"}}}H.type=ab;H.href=V;H.title=aa;if(H.autoDimensions&&H.type!=="iframe"&&H.type!=="swf"){H.width="auto";H.height="auto"}if(H.modal){H.overlayShow=true;H.hideOnOverlayClick=false;H.hideOnContentClick=false;H.enableEscapeButton=false;H.showCloseButton=false}if(x.isFunction(H.onStart)){if(H.onStart(Q,z,H)===false){g=false;return}}m.css("padding",(U+H.padding+H.margin));x(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){x(this).replaceWith(M.children())});switch(ab){case"html":m.html(H.content);w();break;case"inline":x('<div class="fancybox-inline-tmp" />').hide().insertBefore(x(ac)).bind("fancybox-cleanup",function(){x(this).replaceWith(M.children())}).bind("fancybox-cancel",function(){x(this).replaceWith(m.children())});x(ac).appendTo(m);w();break;case"image":g=false;x.fancybox.showActivity();N=new Image();N.onerror=function(){B()};N.onload=function(){N.onerror=null;N.onload=null;t()};N.src=V;break;case"swf":W='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+H.width+'" height="'+H.height+'"><param name="movie" value="'+V+'"></param>';X="";x.each(H.swf,function(ae,ad){W+='<param name="'+ae+'" value="'+ad+'"></param>';X+=" "+ae+'="'+ad+'"'});W+='<embed src="'+V+'" type="application/x-shockwave-flash" width="'+H.width+'" height="'+H.height+'"'+X+"></embed></object>";m.html(W);w();break;case"ajax":Z=V.split("#",2);Y=H.ajax.data||{};if(Z.length>1){V=Z[0];if(typeof Y=="string"){Y+="&selector="+Z[1]}else{Y.selector=Z[1]}}g=false;x.fancybox.showActivity();u=x.ajax(x.extend(H.ajax,{url:V,data:Y,error:B,success:function(af,ae,ad){if(u.status==200){m.html(af);w()}}}));break;case"iframe":x('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" scrolling="'+H.scrolling+'" src="'+H.href+'"></iframe>').appendTo(m);J();break}},i=function(){if(!F.is(":visible")){clearInterval(n);return}x("div",F).css("top",(A*-40)+"px");A=(A+1)%12},c=function(){if(x("#fancybox-wrap").length){return}x("body").append(m=x('<div id="fancybox-tmp"></div>'),F=x('<div id="fancybox-loading"><div></div></div>'),G=x('<div id="fancybox-overlay"></div>'),d=x('<div id="fancybox-wrap"></div>'));if(!x.support.opacity){d.addClass("fancybox-ie");F.addClass("fancybox-ie")}l=x('<div id="fancybox-outer"></div>').append('<div class="fancy-bg" id="fancy-bg-n"></div><div class="fancy-bg" id="fancy-bg-ne"></div><div class="fancy-bg" id="fancy-bg-e"></div><div class="fancy-bg" id="fancy-bg-se"></div><div class="fancy-bg" id="fancy-bg-s"></div><div class="fancy-bg" id="fancy-bg-sw"></div><div class="fancy-bg" id="fancy-bg-w"></div><div class="fancy-bg" id="fancy-bg-nw"></div>').appendTo(d);l.append(M=x('<div id="fancybox-inner"></div>'),O=x('<a id="fancybox-close"></a>'),T=x('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),p=x('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));O.click(x.fancybox.close);F.click(x.fancybox.cancel);T.click(function(V){V.preventDefault();x.fancybox.prev()});p.click(function(V){V.preventDefault();x.fancybox.next()});if(f){G.get(0).style.setExpression("height","document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight + 'px'");F.get(0).style.setExpression("top","(-20 + (document.documentElement.clientHeight ? document.documentElement.clientHeight/2 : document.body.clientHeight/2 ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop )) + 'px'");l.prepend('<iframe id="fancybox-hide-sel-frame" src="javascript:\'\';" scrolling="no" frameborder="0" ></iframe>')}};x.fn.fancybox=function(V){x(this).data("fancybox",x.extend({},V,(x.metadata?x(this).metadata():{}))).unbind("click.fb").bind("click.fb",function(W){W.preventDefault();if(g){return}g=true;x(this).blur();Q=[];z=0;var X=x(this).attr("rel")||"";if(!X||X==""||X==="nofollow"){Q.push(this)}else{Q=x("a[rel="+X+"], area[rel="+X+"]");z=Q.index(this)}b();return false});return this};x.fancybox=function(Y){if(g){return}g=true;var X=typeof arguments[1]!=="undefined"?arguments[1]:{};Q=[];z=X.index||0;if(x.isArray(Y)){for(var W=0,V=Y.length;W<V;W++){if(typeof Y[W]=="object"){x(Y[W]).data("fancybox",x.extend({},X,Y[W]))}else{Y[W]=x({}).data("fancybox",x.extend({content:Y[W]},X))}}Q=jQuery.merge(Q,Y)}else{if(typeof Y=="object"){x(Y).data("fancybox",x.extend({},X,Y))}else{Y=x({}).data("fancybox",x.extend({content:Y},X))}Q.push(Y)}if(z>Q.length||z<0){z=0}b()};x.fancybox.showActivity=function(){clearInterval(n);F.show();n=setInterval(i,66)};x.fancybox.hideActivity=function(){F.hide()};x.fancybox.next=function(){return x.fancybox.pos(C+1)};x.fancybox.prev=function(){return x.fancybox.pos(C-1)};x.fancybox.pos=function(V){if(g){return}V=parseInt(V,10);if(V>-1&&S.length>V){z=V;b()}if(a.cyclic&&S.length>1&&V<0){z=S.length-1;b()}if(a.cyclic&&S.length>1&&V>=S.length){z=0;b()}return};x.fancybox.cancel=function(){if(g){return}g=true;x.event.trigger("fancybox-cancel");s();if(H&&x.isFunction(H.onCancel)){H.onCancel(Q,z,H)}g=false};x.fancybox.close=function(){if(g||d.is(":hidden")){return}g=true;if(a&&x.isFunction(a.onCleanup)){if(a.onCleanup(S,C,a)===false){g=false;return}}s();x(O.add(T).add(p)).hide();x("#fancybox-title").remove();d.add(M).add(G).unbind();x(window).unbind("resize.fb scroll.fb");x(document).unbind("keydown.fb");function V(){G.fadeOut("fast");d.hide();x.event.trigger("fancybox-cleanup");M.empty();if(x.isFunction(a.onClosed)){a.onClosed(S,C,a)}S=H=[];C=z=0;a=H={};g=false}M.css("overflow","hidden");if(a.transitionOut=="elastic"){e=o();var W=d.position();L={top:W.top,left:W.left,width:d.width(),height:d.height()};if(a.opacity){L.opacity=1}y.prop=1;x(y).animate({prop:0},{duration:a.speedOut,easing:a.easingOut,step:v,complete:V})}else{d.fadeOut(a.transitionOut=="none"?0:a.speedOut,V)}};x.fancybox.resize=function(){var V,W;if(g||d.is(":hidden")){return}g=true;V=M.wrapInner("<div style='overflow:auto'></div>").children();W=V.height();d.css({height:W+(a.padding*2)+K});M.css({height:W});V.replaceWith(V.children());x.fancybox.center()};x.fancybox.center=function(){g=true;var X=h(),V=a.margin,W={};W.top=X[3]+((X[1]-((d.height()-K)+(U*2)))*0.5);W.left=X[2]+((X[0]-(d.width()+(U*2)))*0.5);W.top=Math.max(X[3]+V,W.top);W.left=Math.max(X[2]+V,W.left);d.css(W);g=false};x.fn.fancybox.defaults={padding:10,margin:20,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.3,overlayColor:"#666",titleShow:true,titlePosition:"outside",titleFormat:null,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,onStart:null,onCancel:null,onComplete:null,onCleanup:null,onClosed:null};x(document).ready(function(){c()})})(jQuery);/*!
 * jQuery UI 1.8.1
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI
 */
jQuery.ui||function(c){c.ui={version:"1.8.1",plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")=="hidden")return false;
b=b&&b=="left"?"scrollLeft":"scrollTop";var d=false;if(a[b]>0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,f,g){return c.ui.isOverAxis(a,d,f)&&c.ui.isOverAxis(b,e,g)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,
PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||
/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==
undefined)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");if(b=="absolute"||b=="relative"||b=="fixed"){b=parseInt(a.css("zIndex"));if(!isNaN(b)&&b!=0)return b}a=a.parent()}}return 0}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),d=c.attr(a,"tabindex");return(/input|select|textarea|button|object/.test(b)?!a.disabled:"a"==b||"area"==b?a.href||!isNaN(d):!isNaN(d))&&
!c(a)["area"==b?"parents":"closest"](":hidden").length},tabbable:function(a){var b=c.attr(a,"tabindex");return(isNaN(b)||b>=0)&&c(a).is(":focusable")}})}(jQuery);
;/*!
 * jQuery UI Widget 1.8.1
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b){var j=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add(this).each(function(){b(this).triggerHandler("remove")});return j.call(b(this),a,c)})};b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=function(h){return!!b.data(h,a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend({},c.options);b[e][a].prototype=
b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):d;if(e&&d.substring(0,1)==="_")return h;e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==undefined){h=i;return false}}):this.each(function(){var g=
b.data(this,a);if(g){d&&g.option(d);g._init()}else b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){this.element=b(c).data(this.widgetName,this);this.options=b.extend(true,{},this.options,b.metadata&&b.metadata.get(c)[this.widgetName],a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();
this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,c){var d=a,e=this;if(arguments.length===0)return b.extend({},e.options);if(typeof a==="string"){if(c===undefined)return this.options[a];d={};d[a]=c}b.each(d,function(f,
h){e._setOption(f,h)});return e},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=
b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
;/*
 * jQuery UI Position 1.8.1
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Position
 */
(function(c){c.ui=c.ui||{};var m=/left|center|right/,n=/top|center|bottom/,p=c.fn.position,q=c.fn.offset;c.fn.position=function(a){if(!a||!a.of)return p.apply(this,arguments);a=c.extend({},a);var b=c(a.of),d=(a.collision||"flip").split(" "),e=a.offset?a.offset.split(" "):[0,0],g,h,i;if(a.of.nodeType===9){g=b.width();h=b.height();i={top:0,left:0}}else if(a.of.scrollTo&&a.of.document){g=b.width();h=b.height();i={top:b.scrollTop(),left:b.scrollLeft()}}else if(a.of.preventDefault){a.at="left top";g=h=
0;i={top:a.of.pageY,left:a.of.pageX}}else{g=b.outerWidth();h=b.outerHeight();i=b.offset()}c.each(["my","at"],function(){var f=(a[this]||"").split(" ");if(f.length===1)f=m.test(f[0])?f.concat(["center"]):n.test(f[0])?["center"].concat(f):["center","center"];f[0]=m.test(f[0])?f[0]:"center";f[1]=n.test(f[1])?f[1]:"center";a[this]=f});if(d.length===1)d[1]=d[0];e[0]=parseInt(e[0],10)||0;if(e.length===1)e[1]=e[0];e[1]=parseInt(e[1],10)||0;if(a.at[0]==="right")i.left+=g;else if(a.at[0]==="center")i.left+=
g/2;if(a.at[1]==="bottom")i.top+=h;else if(a.at[1]==="center")i.top+=h/2;i.left+=e[0];i.top+=e[1];return this.each(function(){var f=c(this),k=f.outerWidth(),l=f.outerHeight(),j=c.extend({},i);if(a.my[0]==="right")j.left-=k;else if(a.my[0]==="center")j.left-=k/2;if(a.my[1]==="bottom")j.top-=l;else if(a.my[1]==="center")j.top-=l/2;j.left=parseInt(j.left);j.top=parseInt(j.top);c.each(["left","top"],function(o,r){c.ui.position[d[o]]&&c.ui.position[d[o]][r](j,{targetWidth:g,targetHeight:h,elemWidth:k,
elemHeight:l,offset:e,my:a.my,at:a.at})});c.fn.bgiframe&&f.bgiframe();f.offset(c.extend(j,{using:a.using}))})};c.ui.position={fit:{left:function(a,b){var d=c(window);b=a.left+b.elemWidth-d.width()-d.scrollLeft();a.left=b>0?a.left-b:Math.max(0,a.left)},top:function(a,b){var d=c(window);b=a.top+b.elemHeight-d.height()-d.scrollTop();a.top=b>0?a.top-b:Math.max(0,a.top)}},flip:{left:function(a,b){if(b.at[0]!=="center"){var d=c(window);d=a.left+b.elemWidth-d.width()-d.scrollLeft();var e=b.my[0]==="left"?
-b.elemWidth:b.my[0]==="right"?b.elemWidth:0,g=-2*b.offset[0];a.left+=a.left<0?e+b.targetWidth+g:d>0?e-b.targetWidth+g:0}},top:function(a,b){if(b.at[1]!=="center"){var d=c(window);d=a.top+b.elemHeight-d.height()-d.scrollTop();var e=b.my[1]==="top"?-b.elemHeight:b.my[1]==="bottom"?b.elemHeight:0,g=b.at[1]==="top"?b.targetHeight:-b.targetHeight,h=-2*b.offset[1];a.top+=a.top<0?e+b.targetHeight+h:d>0?e+g+h:0}}}};if(!c.offset.setOffset){c.offset.setOffset=function(a,b){if(/static/.test(c.curCSS(a,"position")))a.style.position=
"relative";var d=c(a),e=d.offset(),g=parseInt(c.curCSS(a,"top",true),10)||0,h=parseInt(c.curCSS(a,"left",true),10)||0;e={top:b.top-e.top+g,left:b.left-e.left+h};"using"in b?b.using.call(a,e):d.css(e)};c.fn.offset=function(a){var b=this[0];if(!b||!b.ownerDocument)return null;if(a)return this.each(function(){c.offset.setOffset(this,a)});return q.call(this)}}})(jQuery);
;/*
 * jQuery UI Dialog 1.8.1
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
(function(c){c.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:"center",resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");var a=this,b=a.options,d=b.title||a.originalTitle||"&#160;",e=c.ui.dialog.getTitleId(a.element),g=(a.uiDialog=c("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){if(b.closeOnEscape&&i.keyCode&&i.keyCode===c.ui.keyCode.ESCAPE){a.close(i);i.preventDefault()}}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(i){a.moveToTop(false,i)});a.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g);var f=(a.uiDialogTitlebar=c("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),
h=c('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).focus(function(){h.addClass("ui-state-focus")}).blur(function(){h.removeClass("ui-state-focus")}).click(function(i){a.close(i);return false}).appendTo(f);(a.uiDialogTitlebarCloseText=c("<span></span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(h);c("<span></span>").addClass("ui-dialog-title").attr("id",
e).html(d).prependTo(f);if(c.isFunction(b.beforeclose)&&!c.isFunction(b.beforeClose))b.beforeClose=b.beforeclose;f.find("*").add(f).disableSelection();b.draggable&&c.fn.draggable&&a._makeDraggable();b.resizable&&c.fn.resizable&&a._makeResizable();a._createButtons(b.buttons);a._isOpen=false;c.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;a.overlay&&a.overlay.destroy();a.uiDialog.hide();a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
a.uiDialog.remove();a.originalTitle&&a.element.attr("title",a.originalTitle);return a},widget:function(){return this.uiDialog},close:function(a){var b=this,d;if(false!==b._trigger("beforeClose",a)){b.overlay&&b.overlay.destroy();b.uiDialog.unbind("keypress.ui-dialog");b._isOpen=false;if(b.options.hide)b.uiDialog.hide(b.options.hide,function(){b._trigger("close",a)});else{b.uiDialog.hide();b._trigger("close",a)}c.ui.dialog.overlay.resize();if(b.options.modal){d=0;c(".ui-dialog").each(function(){if(this!==
b.uiDialog[0])d=Math.max(d,c(this).css("z-index"))});c.ui.dialog.maxZ=d}return b}},isOpen:function(){return this._isOpen},moveToTop:function(a,b){var d=this,e=d.options;if(e.modal&&!a||!e.stack&&!e.modal)return d._trigger("focus",b);if(e.zIndex>c.ui.dialog.maxZ)c.ui.dialog.maxZ=e.zIndex;if(d.overlay){c.ui.dialog.maxZ+=1;d.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=c.ui.dialog.maxZ)}a={scrollTop:d.element.attr("scrollTop"),scrollLeft:d.element.attr("scrollLeft")};c.ui.dialog.maxZ+=1;d.uiDialog.css("z-index",
c.ui.dialog.maxZ);d.element.attr(a);d._trigger("focus",b);return d},open:function(){if(!this._isOpen){var a=this,b=a.options,d=a.uiDialog;a.overlay=b.modal?new c.ui.dialog.overlay(a):null;d.next().length&&d.appendTo("body");a._size();a._position(b.position);d.show(b.show);a.moveToTop(true);b.modal&&d.bind("keypress.ui-dialog",function(e){if(e.keyCode===c.ui.keyCode.TAB){var g=c(":tabbable",this),f=g.filter(":first");g=g.filter(":last");if(e.target===g[0]&&!e.shiftKey){f.focus(1);return false}else if(e.target===
f[0]&&e.shiftKey){g.focus(1);return false}}});c([]).add(d.find(".ui-dialog-content :tabbable:first")).add(d.find(".ui-dialog-buttonpane :tabbable:first")).add(d).filter(":first").focus();a._trigger("open");a._isOpen=true;return a}},_createButtons:function(a){var b=this,d=false,e=c("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");b.uiDialog.find(".ui-dialog-buttonpane").remove();typeof a==="object"&&a!==null&&c.each(a,function(){return!(d=true)});if(d){c.each(a,
function(g,f){g=c('<button type="button"></button>').text(g).click(function(){f.apply(b.element[0],arguments)}).appendTo(e);c.fn.button&&g.button()});e.appendTo(b.uiDialog)}},_makeDraggable:function(){function a(f){return{position:f.position,offset:f.offset}}var b=this,d=b.options,e=c(document),g;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,h){g=d.height==="auto"?"auto":c(this).height();c(this).height(c(this).height()).addClass("ui-dialog-dragging");
b._trigger("dragStart",f,a(h))},drag:function(f,h){b._trigger("drag",f,a(h))},stop:function(f,h){d.position=[h.position.left-e.scrollLeft(),h.position.top-e.scrollTop()];c(this).removeClass("ui-dialog-dragging").height(g);b._trigger("dragStop",f,a(h));c.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function b(f){return{originalPosition:f.originalPosition,originalSize:f.originalSize,position:f.position,size:f.size}}a=a===undefined?this.options.resizable:a;var d=this,e=d.options,g=d.uiDialog.css("position");
a=typeof a==="string"?a:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:a,start:function(f,h){c(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",f,b(h))},resize:function(f,h){d._trigger("resize",f,b(h))},stop:function(f,h){c(this).removeClass("ui-dialog-resizing");e.height=c(this).height();e.width=c(this).width();d._trigger("resizeStop",
f,b(h));c.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var b=[],d=[0,0];a=a||c.ui.dialog.prototype.options.position;if(typeof a==="string"||typeof a==="object"&&"0"in a){b=a.split?a.split(" "):[a[0],a[1]];if(b.length===1)b[1]=b[0];c.each(["left","top"],function(e,g){if(+b[e]===b[e]){d[e]=b[e];b[e]=
g}})}else if(typeof a==="object"){if("left"in a){b[0]="left";d[0]=a.left}else if("right"in a){b[0]="right";d[0]=-a.right}if("top"in a){b[1]="top";d[1]=a.top}else if("bottom"in a){b[1]="bottom";d[1]=-a.bottom}}(a=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position({my:b.join(" "),at:b.join(" "),offset:d.join(" "),of:window,collision:"fit",using:function(e){var g=c(this).css(e).offset().top;g<0&&c(this).css("top",e.top-g)}});a||this.uiDialog.hide()},_setOption:function(a,
b){var d=this,e=d.uiDialog,g=e.is(":data(resizable)"),f=false;switch(a){case "beforeclose":a="beforeClose";break;case "buttons":d._createButtons(b);break;case "closeText":d.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":e.removeClass(d.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b);break;case "disabled":b?e.addClass("ui-dialog-disabled"):e.removeClass("ui-dialog-disabled");break;case "draggable":b?d._makeDraggable():e.draggable("destroy");break;
case "height":f=true;break;case "maxHeight":g&&e.resizable("option","maxHeight",b);f=true;break;case "maxWidth":g&&e.resizable("option","maxWidth",b);f=true;break;case "minHeight":g&&e.resizable("option","minHeight",b);f=true;break;case "minWidth":g&&e.resizable("option","minWidth",b);f=true;break;case "position":d._position(b);break;case "resizable":g&&!b&&e.resizable("destroy");g&&typeof b==="string"&&e.resizable("option","handles",b);!g&&b!==false&&d._makeResizable(b);break;case "title":c(".ui-dialog-title",
d.uiDialogTitlebar).html(""+(b||"&#160;"));break;case "width":f=true;break}c.Widget.prototype._setOption.apply(d,arguments);f&&d._size()},_size:function(){var a=this.options,b;this.element.css({width:"auto",minHeight:0,height:0});b=this.uiDialog.css({height:"auto",width:a.width}).height();this.element.css(a.height==="auto"?{minHeight:Math.max(a.minHeight-b,0),height:"auto"}:{minHeight:0,height:Math.max(a.height-b,0)}).show();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",
this._minHeight())}});c.extend(c.ui.dialog,{version:"1.8.1",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");if(!a){this.uuid+=1;a=this.uuid}return"ui-dialog-title-"+a},overlay:function(a){this.$el=c.ui.dialog.overlay.create(a)}});c.extend(c.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:c.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(a){if(this.instances.length===0){setTimeout(function(){c.ui.dialog.overlay.instances.length&&
c(document).bind(c.ui.dialog.overlay.events,function(d){return c(d.target).zIndex()>=c.ui.dialog.overlay.maxZ})},1);c(document).bind("keydown.dialog-overlay",function(d){if(a.options.closeOnEscape&&d.keyCode&&d.keyCode===c.ui.keyCode.ESCAPE){a.close(d);d.preventDefault()}});c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize)}var b=(this.oldInstances.pop()||c("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});c.fn.bgiframe&&
b.bgiframe();this.instances.push(b);return b},destroy:function(a){this.oldInstances.push(this.instances.splice(c.inArray(a,this.instances),1)[0]);this.instances.length===0&&c([document,window]).unbind(".dialog-overlay");a.remove();var b=0;c.each(this.instances,function(){b=Math.max(b,this.css("z-index"))});this.maxZ=b},height:function(){var a,b;if(c.browser.msie&&c.browser.version<7){a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);b=Math.max(document.documentElement.offsetHeight,
document.body.offsetHeight);return a<b?c(window).height()+"px":a+"px"}else return c(document).height()+"px"},width:function(){var a,b;if(c.browser.msie&&c.browser.version<7){a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return a<b?c(window).width()+"px":a+"px"}else return c(document).width()+"px"},resize:function(){var a=c([]);c.each(c.ui.dialog.overlay.instances,function(){a=a.add(this)});a.css({width:0,
height:0}).css({width:c.ui.dialog.overlay.width(),height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
;(function(a){a.fn.tagCloud=function(g){g=g||{};var h=g.maxPercent||200;var f=g.minPercent||100;var b=g.retrieveCount||function(k){var j=a(k).attr("rel");return(j!=null&&j.length>0?parseInt(j):1)};var e=g.apply||function(k,j){a(k).attr("style","font-size:"+j+"%;")};var i=null;var c=null;var d=this;d.each(function(k){var j=b(this);i=(i==null||j>i?j:i);c=(c==null||c>j?j:c)});d.each(function(k){var j=b(this);size=((h-f)*j/i)+f;e(this,size)})}})(jQuery);(function(c){c.timeago=function(g){if(g instanceof Date){return e(g)}else{if(typeof g=="string"){return e(c.timeago.parse(g))}else{return e(c.timeago.datetime(g))}}};var a=c.timeago;c.extend(c.timeago,{settings:{refreshMillis:60000,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(g){var q=this.settings.strings;var o=q.prefixAgo;var m=q.suffixAgo;if(this.settings.allowFuture){if(g<0){o=q.prefixFromNow;m=q.suffixFromNow}g=Math.abs(g)}var p=g/1000;var h=p/60;var k=h/60;var i=k/24;var j=i/365;function n(t,r){var s=c.isFunction(t)?t(r):t;var u=(q.numbers&&q.numbers[r])||r;return s.replace(/%d/i,u)}var l=p<45&&n(q.seconds,Math.round(p))||p<90&&n(q.minute,1)||h<45&&n(q.minutes,Math.round(h))||h<90&&n(q.hour,1)||k<24&&n(q.hours,Math.round(k))||k<48&&n(q.day,1)||i<30&&n(q.days,Math.floor(i))||i<60&&n(q.month,1)||i<365&&n(q.months,Math.floor(i/30))||j<2&&n(q.year,1)||n(q.years,Math.floor(j));return c.trim([o,l,m].join(" "))},parse:function(g){var h=c.trim(g);h=h.replace(/\.\d\d\d/,"");h=h.replace(/-/,"/").replace(/-/,"/");h=h.replace(/T/," ").replace(/Z/," UTC");h=h.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(h)},datetime:function(g){var h=c(g).get(0).tagName.toLowerCase()=="time";var i=h?c(g).attr("datetime"):c(g).attr("title");return a.parse(i)}});c.fn.timeago=function(){var g=this;g.each(d);var h=a.settings;if(h.refreshMillis>0){setInterval(function(){g.each(d)},h.refreshMillis)}return g};function d(){var g=b(this);if(!isNaN(g.datetime)){c(this).text(e(g.datetime))}return this}function b(h){h=c(h);if(!h.data("timeago")){h.data("timeago",{datetime:a.datetime(h)});var g=c.trim(h.text());if(g.length>0){h.attr("title",g)}}return h.data("timeago")}function e(g){return a.inWords(f(g))}function f(g){return(new Date().getTime()-g.getTime())}document.createElement("abbr");document.createElement("time")})(jQuery);$(document).ready(function(){$("ul#albums").treeview({url:"/"+username+"/albums/nodes"});$("a.fanceyboxmodal").fancybox({width:460,height:440,autoScale:false,transitionIn:"none",transitionOut:"none",type:"iframe",overlayOpacity:0.75,overlayColor:"#000"})});window.application.addController((function(b,c){function a(){this.route("/",this.index);this.route("/show/:id",this.showAlbum);this.route("/404",this.pageNotFound);this.landingPageView=null;this.albumView=null;this.pageNotFound=null}a.prototype=new c.Controller();a.prototype.init=function(){this.landingPageView=c.getView("AlbumLandingPageView");this.albumView=c.getView("AlbumView");this.pageNotFound=c.getView("PageNotFoundView")};a.prototype.showAlbum=function(d){this.showView(this.albumView,d)};a.prototype.index=function(d){this.showView(this.landingPageView,d)};a.prototype.pageNotFound=function(d){this.showView(this.pageNotFound,d)};a.prototype.showView=function(e,d){if(this.currentView&&this.currentView.hideView){this.currentView.hideView()}e.showView(d.parameters);this.currentView=e};return(new a())})(jQuery,window.application));