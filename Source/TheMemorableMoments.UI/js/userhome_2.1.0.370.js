String.prototype.startsWith=function(a){return(this.substr(0,a.length)===a)};$(window).bind("load",function(){$("a.tag").tagCloud();$("a.year").tagCloud();showMessage()});function fadeIn(a){var b=$(a);b.removeClass("hidden");b.hide();b.fadeIn("fast")}$(document).ready(function(){$("input#tagfilter").keyup(function(){filterTags(this,"a.tag","span.tagWrapper")});$("input#yearfilter").keyup(function(){filterTags(this,"a.year","span.yearWrapper")});$("a.showimage").imgPreview({containerID:"imgPreviewWithStyles",imgCSS:{height:300,onShow:function(){$(this).fadeIn()}},onShow:function(a){var b=$(a).attr("title");if(b){$("<span>"+b+"</span>").appendTo(this)}},onHide:function(a){$("span",this).remove()}});$("abbr.timeago").timeago()});function filterTags(a,b,d){var c=$(a).val();$(d).each(function(){var g=$(this);var f=g.find(b);var e=f.text();if(!e.startsWith(c)){g.hide()}else{g.show()}})};(function(a){a.fn.tagCloud=function(g){g=g||{};var h=g.maxPercent||200;var f=g.minPercent||100;var b=g.retrieveCount||function(k){var j=a(k).attr("rel");return(j!=null&&j.length>0?parseInt(j):1)};var e=g.apply||function(k,j){a(k).attr("style","font-size:"+j+"%;")};var i=null;var c=null;var d=this;d.each(function(k){var j=b(this);i=(i==null||j>i?j:i);c=(c==null||c>j?j:c)});d.each(function(k){var j=b(this);size=((h-f)*j/i)+f;e(this,size)})}})(jQuery);(function(x){var m,F,G,d,l,M,O,T,p,z=0,H={},Q=[],C=0,a={},S=[],u=null,N=new Image(),k=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,P=/[^\.]\.(swf)\s*$/i,n,A=1,e,L,g=false,U=20,y=x.extend(x("<div/>")[0],{prop:0}),K=0,f=!x.support.opacity&&!window.XMLHttpRequest,s=function(){F.hide();N.onerror=N.onload=null;if(u){u.abort()}m.empty()},B=function(){x.fancybox('<p id="fancybox_error">The requested content cannot be loaded.<br />Please try again later.</p>',{scrolling:"no",padding:20,transitionIn:"none",transitionOut:"none"})},h=function(){return[x(window).width(),x(window).height(),x(document).scrollLeft(),x(document).scrollTop()]},q=function(){var X=h(),V={},aa=a.margin,ac=a.autoScale,ab=(U+aa)*2,Z=(U+aa)*2,Y=(a.padding*2),W;if(a.width.toString().indexOf("%")>-1){V.width=((X[0]*parseFloat(a.width))/100)-(U*2);ac=false}else{V.width=a.width+Y}if(a.height.toString().indexOf("%")>-1){V.height=((X[1]*parseFloat(a.height))/100)-(U*2);ac=false}else{V.height=a.height+Y}if(ac&&(V.width>(X[0]-ab)||V.height>(X[1]-Z))){if(H.type=="image"||H.type=="swf"){ab+=Y;Z+=Y;W=Math.min(Math.min(X[0]-ab,a.width)/a.width,Math.min(X[1]-Z,a.height)/a.height);V.width=Math.round(W*(V.width-Y))+Y;V.height=Math.round(W*(V.height-Y))+Y}else{V.width=Math.min(V.width,(X[0]-ab));V.height=Math.min(V.height,(X[1]-Z))}}V.top=X[3]+((X[1]-(V.height+(U*2)))*0.5);V.left=X[2]+((X[0]-(V.width+(U*2)))*0.5);if(a.autoScale===false){V.top=Math.max(X[3]+aa,V.top);V.left=Math.max(X[2]+aa,V.left)}return V},j=function(V){if(V&&V.length){switch(a.titlePosition){case"inside":return V;case"over":return'<span id="fancybox-title-over">'+V+"</span>";default:return'<span id="fancybox-title-wrap"><span id="fancybox-title-left"></span><span id="fancybox-title-main">'+V+'</span><span id="fancybox-title-right"></span></span>'}}return false},r=function(){var V=a.title,W=L.width-(a.padding*2),X="fancybox-title-"+a.titlePosition;x("#fancybox-title").remove();K=0;if(a.titleShow===false){return}V=x.isFunction(a.titleFormat)?a.titleFormat(V,S,C,a):j(V);if(!V||V===""){return}x('<div id="fancybox-title" class="'+X+'" />').css({width:W,paddingLeft:a.padding,paddingRight:a.padding}).html(V).appendTo("body");switch(a.titlePosition){case"inside":K=x("#fancybox-title").outerHeight(true)-a.padding;L.height+=K;break;case"over":x("#fancybox-title").css("bottom",a.padding);break;default:x("#fancybox-title").css("bottom",x("#fancybox-title").outerHeight(true)*-1);break}x("#fancybox-title").appendTo(l).hide()},E=function(){x(document).unbind("keydown.fb").bind("keydown.fb",function(V){if(V.keyCode==27&&a.enableEscapeButton){V.preventDefault();x.fancybox.close()}else{if(V.keyCode==37){V.preventDefault();x.fancybox.prev()}else{if(V.keyCode==39){V.preventDefault();x.fancybox.next()}}}});if(x.fn.mousewheel){d.unbind("mousewheel.fb");if(S.length>1){d.bind("mousewheel.fb",function(V,W){V.preventDefault();if(g||W===0){return}if(W>0){x.fancybox.prev()}else{x.fancybox.next()}})}}if(!a.showNavArrows){return}if((a.cyclic&&S.length>1)||C!==0){T.show()}if((a.cyclic&&S.length>1)||C!=(S.length-1)){p.show()}},I=function(){var W,V;if((S.length-1)>C){W=S[C+1].href;if(typeof W!=="undefined"&&W.match(k)){V=new Image();V.src=W}}if(C>0){W=S[C-1].href;if(typeof W!=="undefined"&&W.match(k)){V=new Image();V.src=W}}},R=function(){M.css("overflow",(a.scrolling=="auto"?(a.type=="image"||a.type=="iframe"||a.type=="swf"?"hidden":"auto"):(a.scrolling=="yes"?"auto":"visible")));if(!x.support.opacity){M.get(0).style.removeAttribute("filter");d.get(0).style.removeAttribute("filter")}x("#fancybox-title").show();if(a.hideOnContentClick){M.one("click",x.fancybox.close)}if(a.hideOnOverlayClick){G.one("click",x.fancybox.close)}if(a.showCloseButton){O.show()}E();x(window).bind("resize.fb",x.fancybox.center);if(a.centerOnScroll){x(window).bind("scroll.fb",x.fancybox.center)}else{x(window).unbind("scroll.fb")}if(x.isFunction(a.onComplete)){a.onComplete(S,C,a)}g=false;I()},v=function(Z){var W=Math.round(e.width+(L.width-e.width)*Z),V=Math.round(e.height+(L.height-e.height)*Z),Y=Math.round(e.top+(L.top-e.top)*Z),X=Math.round(e.left+(L.left-e.left)*Z);d.css({width:W+"px",height:V+"px",top:Y+"px",left:X+"px"});W=Math.max(W-a.padding*2,0);V=Math.max(V-(a.padding*2+(K*Z)),0);M.css({width:W+"px",height:V+"px"});if(typeof L.opacity!=="undefined"){d.css("opacity",(Z<0.5?0.5:Z))}},D=function(W){var V=W.offset();V.top+=parseFloat(W.css("paddingTop"))||0;V.left+=parseFloat(W.css("paddingLeft"))||0;V.top+=parseFloat(W.css("border-top-width"))||0;V.left+=parseFloat(W.css("border-left-width"))||0;V.width=W.width();V.height=W.height();return V},o=function(){var V=H.orig?x(H.orig):false,Y={},W,X;if(V&&V.length){W=D(V);Y={width:(W.width+(a.padding*2)),height:(W.height+(a.padding*2)),top:(W.top-a.padding-U),left:(W.left-a.padding-U)}}else{X=h();Y={width:1,height:1,top:X[3]+X[1]*0.5,left:X[2]+X[0]*0.5}}return Y},J=function(){F.hide();if(d.is(":visible")&&x.isFunction(a.onCleanup)){if(a.onCleanup(S,C,a)===false){x.event.trigger("fancybox-cancel");g=false;return}}S=Q;C=z;a=H;M.get(0).scrollTop=0;M.get(0).scrollLeft=0;if(a.overlayShow){if(f){x("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"})}G.css({"background-color":a.overlayColor,opacity:a.overlayOpacity}).unbind().show()}L=q();r();if(d.is(":visible")){x(O.add(T).add(p)).hide();var W=d.position(),V;e={top:W.top,left:W.left,width:d.width(),height:d.height()};V=(e.width==L.width&&e.height==L.height);M.fadeOut(a.changeFade,function(){var X=function(){M.html(m.contents()).fadeIn(a.changeFade,R)};x.event.trigger("fancybox-change");M.empty().css("overflow","hidden");if(V){M.css({top:a.padding,left:a.padding,width:Math.max(L.width-(a.padding*2),1),height:Math.max(L.height-(a.padding*2)-K,1)});X()}else{M.css({top:a.padding,left:a.padding,width:Math.max(e.width-(a.padding*2),1),height:Math.max(e.height-(a.padding*2),1)});y.prop=0;x(y).animate({prop:1},{duration:a.changeSpeed,easing:a.easingChange,step:v,complete:X})}});return}d.css("opacity",1);if(a.transitionIn=="elastic"){e=o();M.css({top:a.padding,left:a.padding,width:Math.max(e.width-(a.padding*2),1),height:Math.max(e.height-(a.padding*2),1)}).html(m.contents());d.css(e).show();if(a.opacity){L.opacity=0}y.prop=0;x(y).animate({prop:1},{duration:a.speedIn,easing:a.easingIn,step:v,complete:R})}else{M.css({top:a.padding,left:a.padding,width:Math.max(L.width-(a.padding*2),1),height:Math.max(L.height-(a.padding*2)-K,1)}).html(m.contents());d.css(L).fadeIn(a.transitionIn=="none"?0:a.speedIn,R)}},w=function(){m.width(H.width);m.height(H.height);if(H.width=="auto"){H.width=m.width()}if(H.height=="auto"){H.height=m.height()}J()},t=function(){g=true;H.width=N.width;H.height=N.height;x("<img />").attr({id:"fancybox-img",src:N.src,alt:H.title}).appendTo(m);J()},b=function(){s();var ac=Q[z],V,ab,aa,W,X,Z,Y;H=x.extend({},x.fn.fancybox.defaults,(typeof x(ac).data("fancybox")=="undefined"?H:x(ac).data("fancybox")));aa=ac.title||x(ac).title||H.title||"";if(ac.nodeName&&!H.orig){H.orig=x(ac).children("img:first").length?x(ac).children("img:first"):x(ac)}if(aa===""&&H.orig){aa=H.orig.attr("alt")}if(ac.nodeName&&(/^(?:javascript|#)/i).test(ac.href)){V=H.href||null}else{V=H.href||ac.href||null}if(H.type){ab=H.type;if(!V){V=H.content}}else{if(H.content){ab="html"}else{if(V){if(V.match(k)){ab="image"}else{if(V.match(P)){ab="swf"}else{if(x(ac).hasClass("iframe")){ab="iframe"}else{if(V.match(/#/)){ac=V.substr(V.indexOf("#"));ab=x(ac).length>0?"inline":"ajax"}else{ab="ajax"}}}}}else{ab="inline"}}}H.type=ab;H.href=V;H.title=aa;if(H.autoDimensions&&H.type!=="iframe"&&H.type!=="swf"){H.width="auto";H.height="auto"}if(H.modal){H.overlayShow=true;H.hideOnOverlayClick=false;H.hideOnContentClick=false;H.enableEscapeButton=false;H.showCloseButton=false}if(x.isFunction(H.onStart)){if(H.onStart(Q,z,H)===false){g=false;return}}m.css("padding",(U+H.padding+H.margin));x(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){x(this).replaceWith(M.children())});switch(ab){case"html":m.html(H.content);w();break;case"inline":x('<div class="fancybox-inline-tmp" />').hide().insertBefore(x(ac)).bind("fancybox-cleanup",function(){x(this).replaceWith(M.children())}).bind("fancybox-cancel",function(){x(this).replaceWith(m.children())});x(ac).appendTo(m);w();break;case"image":g=false;x.fancybox.showActivity();N=new Image();N.onerror=function(){B()};N.onload=function(){N.onerror=null;N.onload=null;t()};N.src=V;break;case"swf":W='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+H.width+'" height="'+H.height+'"><param name="movie" value="'+V+'"></param>';X="";x.each(H.swf,function(ae,ad){W+='<param name="'+ae+'" value="'+ad+'"></param>';X+=" "+ae+'="'+ad+'"'});W+='<embed src="'+V+'" type="application/x-shockwave-flash" width="'+H.width+'" height="'+H.height+'"'+X+"></embed></object>";m.html(W);w();break;case"ajax":Z=V.split("#",2);Y=H.ajax.data||{};if(Z.length>1){V=Z[0];if(typeof Y=="string"){Y+="&selector="+Z[1]}else{Y.selector=Z[1]}}g=false;x.fancybox.showActivity();u=x.ajax(x.extend(H.ajax,{url:V,data:Y,error:B,success:function(af,ae,ad){if(u.status==200){m.html(af);w()}}}));break;case"iframe":x('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" scrolling="'+H.scrolling+'" src="'+H.href+'"></iframe>').appendTo(m);J();break}},i=function(){if(!F.is(":visible")){clearInterval(n);return}x("div",F).css("top",(A*-40)+"px");A=(A+1)%12},c=function(){if(x("#fancybox-wrap").length){return}x("body").append(m=x('<div id="fancybox-tmp"></div>'),F=x('<div id="fancybox-loading"><div></div></div>'),G=x('<div id="fancybox-overlay"></div>'),d=x('<div id="fancybox-wrap"></div>'));if(!x.support.opacity){d.addClass("fancybox-ie");F.addClass("fancybox-ie")}l=x('<div id="fancybox-outer"></div>').append('<div class="fancy-bg" id="fancy-bg-n"></div><div class="fancy-bg" id="fancy-bg-ne"></div><div class="fancy-bg" id="fancy-bg-e"></div><div class="fancy-bg" id="fancy-bg-se"></div><div class="fancy-bg" id="fancy-bg-s"></div><div class="fancy-bg" id="fancy-bg-sw"></div><div class="fancy-bg" id="fancy-bg-w"></div><div class="fancy-bg" id="fancy-bg-nw"></div>').appendTo(d);l.append(M=x('<div id="fancybox-inner"></div>'),O=x('<a id="fancybox-close"></a>'),T=x('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),p=x('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));O.click(x.fancybox.close);F.click(x.fancybox.cancel);T.click(function(V){V.preventDefault();x.fancybox.prev()});p.click(function(V){V.preventDefault();x.fancybox.next()});if(f){G.get(0).style.setExpression("height","document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight + 'px'");F.get(0).style.setExpression("top","(-20 + (document.documentElement.clientHeight ? document.documentElement.clientHeight/2 : document.body.clientHeight/2 ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop )) + 'px'");l.prepend('<iframe id="fancybox-hide-sel-frame" src="javascript:\'\';" scrolling="no" frameborder="0" ></iframe>')}};x.fn.fancybox=function(V){x(this).data("fancybox",x.extend({},V,(x.metadata?x(this).metadata():{}))).unbind("click.fb").bind("click.fb",function(W){W.preventDefault();if(g){return}g=true;x(this).blur();Q=[];z=0;var X=x(this).attr("rel")||"";if(!X||X==""||X==="nofollow"){Q.push(this)}else{Q=x("a[rel="+X+"], area[rel="+X+"]");z=Q.index(this)}b();return false});return this};x.fancybox=function(Y){if(g){return}g=true;var X=typeof arguments[1]!=="undefined"?arguments[1]:{};Q=[];z=X.index||0;if(x.isArray(Y)){for(var W=0,V=Y.length;W<V;W++){if(typeof Y[W]=="object"){x(Y[W]).data("fancybox",x.extend({},X,Y[W]))}else{Y[W]=x({}).data("fancybox",x.extend({content:Y[W]},X))}}Q=jQuery.merge(Q,Y)}else{if(typeof Y=="object"){x(Y).data("fancybox",x.extend({},X,Y))}else{Y=x({}).data("fancybox",x.extend({content:Y},X))}Q.push(Y)}if(z>Q.length||z<0){z=0}b()};x.fancybox.showActivity=function(){clearInterval(n);F.show();n=setInterval(i,66)};x.fancybox.hideActivity=function(){F.hide()};x.fancybox.next=function(){return x.fancybox.pos(C+1)};x.fancybox.prev=function(){return x.fancybox.pos(C-1)};x.fancybox.pos=function(V){if(g){return}V=parseInt(V,10);if(V>-1&&S.length>V){z=V;b()}if(a.cyclic&&S.length>1&&V<0){z=S.length-1;b()}if(a.cyclic&&S.length>1&&V>=S.length){z=0;b()}return};x.fancybox.cancel=function(){if(g){return}g=true;x.event.trigger("fancybox-cancel");s();if(H&&x.isFunction(H.onCancel)){H.onCancel(Q,z,H)}g=false};x.fancybox.close=function(){if(g||d.is(":hidden")){return}g=true;if(a&&x.isFunction(a.onCleanup)){if(a.onCleanup(S,C,a)===false){g=false;return}}s();x(O.add(T).add(p)).hide();x("#fancybox-title").remove();d.add(M).add(G).unbind();x(window).unbind("resize.fb scroll.fb");x(document).unbind("keydown.fb");function V(){G.fadeOut("fast");d.hide();x.event.trigger("fancybox-cleanup");M.empty();if(x.isFunction(a.onClosed)){a.onClosed(S,C,a)}S=H=[];C=z=0;a=H={};g=false}M.css("overflow","hidden");if(a.transitionOut=="elastic"){e=o();var W=d.position();L={top:W.top,left:W.left,width:d.width(),height:d.height()};if(a.opacity){L.opacity=1}y.prop=1;x(y).animate({prop:0},{duration:a.speedOut,easing:a.easingOut,step:v,complete:V})}else{d.fadeOut(a.transitionOut=="none"?0:a.speedOut,V)}};x.fancybox.resize=function(){var V,W;if(g||d.is(":hidden")){return}g=true;V=M.wrapInner("<div style='overflow:auto'></div>").children();W=V.height();d.css({height:W+(a.padding*2)+K});M.css({height:W});V.replaceWith(V.children());x.fancybox.center()};x.fancybox.center=function(){g=true;var X=h(),V=a.margin,W={};W.top=X[3]+((X[1]-((d.height()-K)+(U*2)))*0.5);W.left=X[2]+((X[0]-(d.width()+(U*2)))*0.5);W.top=Math.max(X[3]+V,W.top);W.left=Math.max(X[2]+V,W.left);d.css(W);g=false};x.fn.fancybox.defaults={padding:10,margin:20,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.3,overlayColor:"#666",titleShow:true,titlePosition:"outside",titleFormat:null,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,onStart:null,onCancel:null,onComplete:null,onCleanup:null,onClosed:null};x(document).ready(function(){c()})})(jQuery);(function(c){c.timeago=function(g){if(g instanceof Date){return e(g)}else{if(typeof g=="string"){return e(c.timeago.parse(g))}else{return e(c.timeago.datetime(g))}}};var a=c.timeago;c.extend(c.timeago,{settings:{refreshMillis:60000,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(g){var q=this.settings.strings;var o=q.prefixAgo;var m=q.suffixAgo;if(this.settings.allowFuture){if(g<0){o=q.prefixFromNow;m=q.suffixFromNow}g=Math.abs(g)}var p=g/1000;var h=p/60;var k=h/60;var i=k/24;var j=i/365;function n(t,r){var s=c.isFunction(t)?t(r):t;var u=(q.numbers&&q.numbers[r])||r;return s.replace(/%d/i,u)}var l=p<45&&n(q.seconds,Math.round(p))||p<90&&n(q.minute,1)||h<45&&n(q.minutes,Math.round(h))||h<90&&n(q.hour,1)||k<24&&n(q.hours,Math.round(k))||k<48&&n(q.day,1)||i<30&&n(q.days,Math.floor(i))||i<60&&n(q.month,1)||i<365&&n(q.months,Math.floor(i/30))||j<2&&n(q.year,1)||n(q.years,Math.floor(j));return c.trim([o,l,m].join(" "))},parse:function(g){var h=c.trim(g);h=h.replace(/\.\d\d\d/,"");h=h.replace(/-/,"/").replace(/-/,"/");h=h.replace(/T/," ").replace(/Z/," UTC");h=h.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(h)},datetime:function(g){var h=c(g).get(0).tagName.toLowerCase()=="time";var i=h?c(g).attr("datetime"):c(g).attr("title");return a.parse(i)}});c.fn.timeago=function(){var g=this;g.each(d);var h=a.settings;if(h.refreshMillis>0){setInterval(function(){g.each(d)},h.refreshMillis)}return g};function d(){var g=b(this);if(!isNaN(g.datetime)){c(this).text(e(g.datetime))}return this}function b(h){h=c(h);if(!h.data("timeago")){h.data("timeago",{datetime:a.datetime(h)});var g=c.trim(h.text());if(g.length>0){h.attr("title",g)}}return h.data("timeago")}function e(g){return a.inWords(f(g))}function f(g){return(new Date().getTime()-g.getTime())}document.createElement("abbr");document.createElement("time")})(jQuery);